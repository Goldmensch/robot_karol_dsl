main {
    test isMark(x) {
        red with true -> step()
        blue with isWall() -> {
            2 times { step() }
        }
        yellow -> test isBrick(x) {
            12 -> { setMark(red) }
            _ -> { step() }
        }
        _ -> if isWall() {
            loop { step() }
        }
    }

    try {
        isWall() & isMark() -> step()
        _ -> try {
            isWall() -> { 2 times { step() }}
            _ -> step()
        }
    }
}